# JS简介

* JavaScript是属于Web的编程语言，负责网页的逻辑处理。
* 是弱类型语言
* 与HTML进行交互，可以改变HTML的属性，内容，样式；显示\隐藏HTML属性

# JS基础语法

## JS语句与语法概述

JavaScript 语句由：值、运算符、表达式、关键字和注释构成，是JS语言的内容；

而语法定义的JS的语言结构。

语句：

* 值：
    * 字面量
    * 变量值
* 运算符：
    * 算术运算符
    * 赋值运算符
    * 比较运算符
    * 逻辑运算符
* 表达式：表达式是值、变量和运算符的组合，计算结果是值。
* 关键字：用于标识被执行的动作。

* 注释：
    * 单行注释:`//`
    * 多行注释`/**/`

## 标识符

标识符是名称。

在 JavaScript 中，标识符用于命名变量、关键词、函数和标签。

标识符的命名规则：

* 名称可包含字母、数字、下划线和美元符号
* 不能以数字开头
* 名称对大小写敏感
* 保留字（比如 JavaScript 的关键词）无法用作变量名称

## 数据类型

* 基本数据类型：
    * String
    * Number
    * Boolean
* 引用数据类型：
    * Object
    * Array
    * Function
* 不保存数据的：
    * Null：表示引用类型变量没有指向
    * Undefined：表示变量为初始化，定义后为被赋值

可以通过`typeof`运算符返回值的数据类型

## 变量

JS中用 `var`关键字声明变量以存储值，通过赋值运算符`=`为变量赋值

需要注意的是，JS是弱类型语言，声明时不需要定义变量的数据类型

同一个变量可以存储不同的数据类型

~~~js
var a = 10;
alert(a);
a ="test";
alert(a);
~~~



## 作用域，var，let和const

全局作用域：在全局(函数之外)声明的变量可以在JS程序的任何地方访问到

函数作用域：在函数体声明的变量只能在函数内访问

块作用域：被`{}`包住的代码块叫块作用域，在块作用域中：

* 用`var`声明的变量，仍能被全局访问
* 用`let`或`const`声明的变量，只能在块作用域中访问：
    * `let`变量，值可以改变
    * `const`常量，值或者引用不可以改变，必须在声明时赋值，但引用的内容可以改变

通过 var 关键词定义的全局变量属于 window 对象

通过 var 声明的变量会提升到顶端，可以在声明变量之前就使用它。



## 运算

### 算数运算

发生在Number之间，结果也为Number

| 运算符 | 含义 |
| ------ | ---- |
| `+`    | 加   |
| `-`    | 减   |
| `*`    | 乘   |
| `**`   | 幂   |
| `/`    | 除   |
| `%`    | 模   |
| `++`   | 自增 |
| `--`   | 自减 |

除了加法，Number以外的其他数据类型进行算数运算时，会先将数据类型转为Number再运算：

`null` `false`转换为数字类型值为0

`true`转换为数字类型为1

`string`转换成数字类型，如果能的话

### 赋值运算

| 运算符 | 例子     | 等同于      |
| :----- | :------- | :---------- |
| =      | x = y    | x = y       |
| +=     | x += y   | x = x + y   |
| -=     | x -= y   | x = x - y   |
| *=     | x *= y   | x = x * y   |
| /=     | x /= y   | x = x / y   |
| %=     | x %= y   | x = x % y   |
| <<=    | x <<= y  | x = x << y  |
| >>=    | x >>= y  | x = x >> y  |
| >>>=   | x >>>= y | x = x >>> y |
| &=     | x &= y   | x = x & y   |
| ^=     | x ^= y   | x = x ^ y   |
| \|=    | x \|= y  | x = x \| y  |
| **=    | x **= y  | x = x ** y  |

### 比较运算

比较运算发生在值(字面量，变量)之间，结果未布尔值

| 运算符 | 描述                 |
| :----- | :------------------- |
| ==     | 等于                 |
| ===    | 值相等并且类型相等   |
| !=     | 不相等               |
| !==    | 值不相等或类型不相等 |
| >      | 大于                 |
| <      | 小于                 |
| >=     | 大于或等于           |
| <=     | 小于或等于           |

### 逻辑运算

逻辑运算发生在布尔值之间， 结果也为布尔值

JS中的逻辑运算只有短路类型的

| 运算符 | 描述 |
| ------ | ---- |
| `&&`   | 与   |
| `||`   | 或   |
| `!`    | 非   |



### 字符串拼接

* 字符串与字符串之间可以进行拼接操作，通过`+`运算符
* 字符串与其他数据类型进行`+`运算，会先将其他类型转换为字符串类型， 再进行拼接操作



## 流程控制

* if

~~~js
if(boolean表达式){
    
}else if(boolean表达式){
    
}else
~~~



* for

~~~js
for(语句1; 语句2 ; 语句3){
	//循环体
}
/*
语句 1 在循环（代码块）开始之前执行。

语句 2 定义运行循环（代码块）的条件。

语句 3 会在循环（代码块）每次被执行后执行。
*/
~~~



* for in

~~~js
for (property in expression) {
	//循环体
}
//会循环对象中的属性
~~~

* while

~~~javascript
while (条件) {
    //要执行的代码块
}
~~~

* switch

~~~js
switch(表达式) {
     case n:
        代码块
        break;
     case n:
        代码块
        break;
     default:
        默认代码块
} 
//JS的switch使用严格匹配 ===
~~~



* break:中断循环
* continue：中断当前迭代，进入下一次迭代





# 基本数据类型

基本数据类型没有属性和方法，但是通过 JavaScript，方法和属性也可用于基本数据类型:

针对基本数据类型`number`,`string`,`boolean`，JS提供了对应的包装对象`Number`,`String`,`Boolean`在必要时JS会自动的在基本数据类型和对象之间转换(自动拆装箱)

## Number

* JS中只有一种数值类型，书写数值时带不带小数点都可

* 数值可以用科学计数法

* `NaN`(Not a Number)是JS的保留字，表示一个数不是合法数

    可用JS内置函数`isNaN()`判断值是否是数

* `Infinity`是计算数是超过最大可能数范围时返回的值

### Number包装对象

Number 对象是原始数值的包装对象。

属性：

* `MAX_VALUE`最大数
* `MIN_VALUE`最小正数
* `NEGETIVE_INFINITY`负无穷大
* `NaN`非数值
* `POSITIVE_INFINITY`正无穷大

需要注意：

这些属性是包装对象Number的构造函数的内置属性，无法由具体的数值调用

方法：

* `toString()`以字符串返回数值
* `toExponential()` 返回字符串值，它包含已被四舍五入并使用指数计数法的数字

* `toFixed()` 返回字符串值，它包含了指定位数小数的数字
* `toPrecision()` 返回字符串值，它包含了指定长度的数字
* `valueOf()` 以数值返回数值

### 内置数值的全局方法

- `Number()` 将参数转换为数值
    - 不允许空格
    - 可以将日期转换为数字
- `parseInt() `将字符串转换为整数
    - 允许空格，只返回首个数字
    - 无法解析则返回`NaN`
- `parseFloat() `将字符串转换为浮点数
    - 允许空格，只返回首个数字
    - 无法解析则返回`NaN`

## String

* JS中可以用单引号，双引号表示字符串
* 内建属性 `length` 可返回字符串的长度

* `\`提供转义，
* `\`提供长字符串换行（不推荐）

### String包装对象

属性：

* `length`返回字符串长度

方法：

* `indexOf(sertchvalue[,fromindex])` 方法返回字符串中指定文本*首次*出现的索引，未找到返回`-1`
* `lastIndexOf(sertchvalue[,fromindex])` 方法返回指定文本在字符串中*最后*一次出现的索引，未找到返回`-1`

* `search(regexp)`检索与正则表达式相匹配的子字符串，返回首次匹配字符的索引，未找到返回`-1`

* 返回子串(索引含头不含尾)
    * `slice(start[, end])`允许负索引
    * `substring(start[, end])`不允许负索引
    * `substr(start[, length])`
* `replace(regexp/substr,replacement)`替换指定字符串的所有指定匹配
* `toUpperCase()`字符串转换为大写
* `toLowerCase()`字符串转换为小写
* `concat(stringX,stringX,...,stringX)`拼接两个或多个字符串
* `trim()`删除字符串两端的空白符(空格，换行等)
* `charAt(index)`返回指定索引的字符
* `charCodeAt(index)`返回指定索引的字符unicode编码
* `split(separator[,maxlength])`按照separator指定的地方分割string



### 字符串模板

模板字面量使用反引号``定义字符串

模板字面量：

* 允许多行字符串
* 允许插值，通过`${}`





## Boolean

js中几乎所有的类型都可以转换为Boolean类型：

对于其他类型，如果表示有值，有含义，则为true，表示无值，无含义，则为false

* Number:
    * `0`：false
    * 其他;true
* String:
    * `""`:false
    * 其他:true

* 引用类型：
    * `null`:false
    * 其他:true

* `undefined`:false

可以通过内置函数`Boolean()`确定值的Boolean值



# 引用类型

## 数组

和java不同JS的数组成员可以是不同的数据类型

创建数组语法：

~~~js
var array_name =[item1,item2,...];
var array_name = new Array(item1,...)
~~~

访问数组：

通过下标取值，赋值，添加元素

### 属性

* length 返回数组中元素的数量

### 静态方法

* `isArray(object)`判断对象是否为数组

### 非静态方法

* `toString()`返回数组元素用`,`拼接的字符串

* `join([separator])`用指定的分隔符将数组元素拼接成字符串，

    如果没有指定separator，将默认用`,`拼接

* `pop()`弹栈，删除数组的最后一个元素,并返回该元素
* `push(object)`进栈，在数组末尾添加一个新元素，并返回新数组长度

* `shift()`弹栈，删除数组第一个元素，并返回该元素值
* `unshift(object)`进栈，在数组首位添加一个新元素，返回新数组长度

* `delete`关键字可以删除数组的指定位置元素，将其变为`undefined`
* `concat(array1,array2,...)`拼接数组
* `sort()`以字典顺序对数组排序，可指定排序函数
* `reverse()`反转数组
* `forEach(function(item[,index,arr]))`遍历数组，对于每个元素，执行一次参数中的函数

* `map(function(item[,index,arr]))`为每个数组元素调用函数的结果创建新数组。返回新数组，不改变原数组
* `filter(function(item[,index,arr]))`，返回一个新数组，由通过测试的数组元素组成，测试由指定函数提供，对原数组的每个元素，执行测试函数，返回true时通过测试
* `indexOf(item)`，返回指定值在数组中首次出现的位置下标，如果没有返回`-1`
* `lastIndexOf(item)`,返回指定值在数组中最后一次出现的位置下标，如果没有返回`-1`

## 函数

定义：

~~~js
function 函数名(形参){
    //函数体
    return ;
}
~~~

调用与引用：

~~~js
function demo(){
    alert("deom")
    return 0;
}
//调用
let a = demo();
//引用
let b = demo;
~~~

### 函数参数

* 如果调用函数时实参少于形参，则丢失的值会被设置为undefined

* JavaScript 函数有一个名为 arguments 对象的内置对象。（array-like）

    该对象将传入的所有实参保存在对象中



### call()、 apply()

TODO

### 闭包

TODO





## 对象

所有 JavaScript 值，除了原始值，都是对象。

JavaScript 对象是无序属性的集合

定义格式

~~~js
var objectName = {
    propertyName = value,
    functionName = function(){},
    ....
}
~~~



* this 在对象中函数的定义中，`this`指向该对象的引用

* 访问对象属性 （获取，添加，修改对象属性）：
    * `objectName.propertyName`
    * `objectName["propertyName"]`
    * `objectName[propertyName]`
* 删除对象属性：`delete`关键字

* 访问对象方法：

    `objectName.methodName()`

* 显示对象
    * `Object.values()`
    * `JSON.stringify()` 不会转化方法

### 对象访问器

通过get关键字，set关键字设置getter和setter函数

直接通过`.访问器名`调用，不需`()`

### 对象构造器

实例：

~~~js
function Person(first, last, age, eye) {
    this.firstName = first;
    this.lastName = last;
    this.age = age;
    this.eyeColor = eye;
    this.name = function() {return this.firstName + " " + this.lastName;};
    this.changeName = function (name) {
        this.lastName = name;
    };
}
~~~

JS用于原始对象的构造器

~~~js
var x1 = new Object();    // 一个新的 Object 对象
var x2 = new String();    // 一个新的 String 对象
var x3 = new Number();    // 一个新的 Number 对象
var x4 = new Boolean();   // 一个新的 Boolean 对象
var x5 = new Array();     // 一个新的 Array 对象
var x6 = new RegExp();    // 一个新的 RegExp 对象
var x7 = new Function();  // 一个新的 Function 对象
var x8 = new Date();      // 一个新的 Date 对象
~~~



### 对象原型

所有 JavaScript 对象都从原型继承属性和方法。

日期对象继承自 Date.prototype。数组对象继承自 Array.prototype。Person 对象继承自 Person.prototype。

Object.prototype 位于原型继承链的顶端：

日期对象、数组对象和 Person 对象都继承自 Object.prototype。

JavaScript prototype 属性允许您为对象构造器添加新属性，新方法：

~~~js
Person.prototype.nationality = "English";
Person.prototype.name = function() {
    return this.firstName + " " + this.lastName;
};
~~~



### 全局对象

在 JavaScript 中，始终存在一种默认的全局对象。

在 HTML 中，默认全局对象是 HTML 页面本身，所有上面的函数“属于”HTML 页面。

在浏览器中，这个页面对象就是浏览器窗口。上面的函数自动成为一个窗口函数。

myFunction() 和 window.myFunction() 是同一个函数：

也就说在全局作用域中创建的函数，默认属于全局对象

# JS特性

## Hoisting

Hoisting 是 JavaScript 将所有声明提升到当前作用域顶部的默认行为（提升到当前脚本或当前函数的顶部）。

* 只有声明被提升，初始化不会
* let,const关键字声明的变量不会被提示
* 函数也会被提升

## this关键字

JS中this指的是它所属的对象

它拥有不同的值，具体取决于它的使用位置：

- 在方法中，`this` 指的是所有者对象。
- 单独的情况下，`this` 指的是全局对象。
- 在函数中，`this` 指的是全局对象。
- 在函数中，严格模式下，`this` 是 undefined。
- 在事件中，`this` 指的是接收事件的元素。



## 类

JS中类是对象的模板

语法

~~~js
class ClassName{
    constructor(){}
    method(){}
    
}
~~~

构造方法是一种特殊的方法：

- 它必须拥有确切名称的“构造函数”
- 创建新对象时自动执行
- 用于初始化对象属性
- 如果未定义构造函数方法，JavaScript 会添加空的构造函数方法。

### 继承

和python类似

super调用父类构造器



### 静态

和java类似

用static声明的变量，函数，只能由类调用，对象实例无法调用















